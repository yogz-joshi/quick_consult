{"changed":true,"filter":false,"title":"app.js","tooltip":"/work/v2/app.js","value":"var express=require(\"express\");\nvar app= express();\nvar mongoose=require(\"mongoose\");\nvar methodOverride=require(\"method-override\");\nvar bodyParser=require(\"body-parser\");\nvar passport=require(\"passport\");\nvar users=require(\"./models/usersM\");\nvar clinic=require(\"./models/clinicM\");\nvar admin=require(\"./models/adminM\");\nvar localStrategy=require(\"passport-local\");\nvar passpoprtLocalMongoose=require(\"passport-local-mongoose\");\nmongoose.connect(\"mongodb://localhost/all_clinics\");\n\n//var seedDB=require(\"./seed\");\n//seedDB();\napp.use(require(\"express-session\")({\n    secret:\"kitty is the best dog\",\n    resave:false,\n    saveUninitialized:false\n}));\n\n\napp.use(bodyParser.urlencoded({ extended:true }));\napp.use(methodOverride(\"_method\"));\napp.use(passport.initialize());\napp.use(passport.session());\n\npassport.use(new localStrategy(admin.authenticate()));\npassport.serializeUser(admin.serializeUser());\npassport.deserializeUser(admin.deserializeUser());\n\n\n\napp.set(\"view engine\",\"ejs\");\napp.use(express.static(\"public\"));//to use custom style sheets from public folder.\napp.use(bodyParser.urlencoded({entended:true}));\n\n// *************************************************************************************************************8\n//adding clinics using form(Only Render for admin login)\napp.get(\"/clinic\",isLoggedIn,function(req,res){\n    clinic.find({},function(err,allClinic){\n        if(err){\n            console.log(err);\n        }\n        else\n        {\n            res.render(\"clinic\",{clinic:allClinic});\n        }\n        \n    });\n});\n\napp.post(\"/clinic\",function(req,res){\n        var name= req.body.cname;\n        var sp=req.body.special;\n        var open=req.body.openAt;\n        var close=req.body.closeAt;\n        var lhrs=req.body.lunchHrs;\n        var lstarts=req.body.lunchAt;\n        var lovers=req.body.lunchOverAt;\n        var closed=0;\n        var newClinic={name:name,speciality:sp,otime:open,ctime:close,lunch_hrs:lhrs,lunch_at:lstarts,lunch_over:lovers,date_close:closed};\n        clinic.create(newClinic,function(err,clinics)\n        {\n            if(err){\n            console.log(err);\n            \n        }else\n        {   \n            res.redirect(\"/clinic/new\");\n        }\n    });\n});\napp.get(\"/clinic/new\",isLoggedIn,function(req, res) {\n    res.render(\"form1\");\n   \n});\n// **********************************************************************************************\n// Home Page viewed to the User\n\napp.get(\"/\",function(req,res){\n    clinic.find({},function(err,allClinic){\n        if(err){\n            console.log(err);\n        }\n        else\n        {\n            res.render(\"home\",{clinic:allClinic});\n        }\n        \n    });\n});\n// ******************************************************************************************\n// deleting clinic\napp.delete(\"/clinic/:id\",function(req,res){\n    clinic.findByIdAndRemove(req.params.id,function(err){\n        if(err)\n        {\n            console.log(err);\n            \n        }else\n        {\n            res.redirect(\"/clinic\");\n        }\n    });\n});\n\n//  ******************************************************************************************************\n//  making appointmnet\n \n app.post(\"/clinic/:id\",function(req,res){\n     clinic.findById(req.params.id,function(err,allclinics){\n         if(err){\n             res.redirect(\"clinic\");\n         }else{\n            //  console.log(req.body.users.date);\n            //  console.log(allclinics.date_close);\n             var a=(req.body.users.date);\n             var b=(allclinics.date_close);\n             if(a === b){\n                //  req.flash(\"err\",\"The Clinic is Closed today.Plaese book tommorow!!\");\n                  res.redirect(\"/clinic/\"+req.params.id+\"/new\");\n                \n             }else{\n            \n                    users.create(req.body.users,function(err,allusers){\n                    if(err){\n                     console.log(\"err\");\n                    }else{\n                     allclinics.users.push(allusers);\n                     allclinics.save();\n                    //req.flash(\"success\",\"Appointment Sucessful.SMS is sent toyour mobile number\");\n                     res.redirect(\"/\");\n                 }\n             \n             });\n            \n             }\n         }\n     });\n });\n \n app.get(\"/clinic/:id/new\",function(req,res){\n    clinic.findById(req.params.id,function (err,allClinic) {\n        if(err){\n            console.log(err);\n        }else{\n            res.render(\"form2\",{clinics:allClinic});\n        }\n        \n    });\n    \n\n});\n// ************************************ ************************************* *************************************\napp.post(\"/clinic/:id/record\",function(req,res){\n    clinic.findById(req.params.id).populate({\n        path:'users',\n        match :{$and: [{date : req.body.search},{time : req.body.timesearch}]}, \n        options:{ sort:{time :1}} }).exec(function(err,allclinic){\n        if(err){\n            console.log(err);\n        }else{\n           // console.log(allclinic);\n            res.render(\"user_record\",{clinics:allclinic});\n        }\n    });\n});\n// ****************************************************************************************************************\n//View user record and update clinic close date..(Only for Admin Account)\n\n\napp.get(\"/clinic/:id/record\",isLoggedIn,function(req,res){\n    clinic.findById(req.params.id).populate({path:'users',options:{ sort:{date : -1}}}).exec(function(err,allclinic){\n        if(err){\n            console.log(err);\n        }else{\n           // console.log(allclinic);\n            res.render(\"user_record\",{clinics:allclinic});\n        }\n    });\n});\napp.get(\"/clinic/:id/update\",isLoggedIn,function(req,res){\n     clinic.findById(req.params.id,function (err,allClinic) {\n        if(err){\n            console.log(err);\n        }else{\n            res.render(\"UpdateDate\",{clinics:allClinic});\n        }\n        \n    });\n});\n// to update the closed clinic date\napp.put(\"/clinic/:id/update\",function(req,res){\n \n    \n    clinic.findByIdAndUpdate(req.params.id,req.body.clinic,function(err,allclinic){\n        if(err){\n            console.log(err);\n        }else{\n            res.redirect(\"/clinic\");\n        }\n    });\n});\n// ********************************************************************************************\n// REGISTER ADMIN ROUTE\n// app.get(\"/register\",function(req,res){\n//     res.render(\"signin\");\n// });\n\n// app.post(\"/register\",function(req,res){\n//     admin.register(new admin({username:req.body.username}),req.body.password,function(err,admin){\n//         if(err){\n//             console.log(err);\n//             return res.render('signin');\n//         }\n//         else{\n//             passport.authenticate(\"local\")(req,res,function(){\n//                 res.redirect(\"/clinic\");\n//             });\n//         }\n//     });\n// });\n// ************************************************************************************************\n// LOGIN ROUTES\napp.get(\"/login\",function(req,res){\n    res.render(\"login\");\n});\n//middleware\napp.post(\"/login\",passport.authenticate(\"local\",{\n    successRedirect:\"/clinic\",\n    failureRedirect:\"/login\"\n}),function(req,res){\n    \n});\n// LOGOUT ROUTE\napp.get(\"/logout\",function(req,res){\n    req.logout();\n    res.redirect(\"/login\");\n});\n// Middleware for checking the active session/authentication\nfunction isLoggedIn(req,res,next){\n    if(req.isAuthenticated()){\n        return next();\n    }\n    res.redirect(\"/login\");\n}\n// **************************************************************************************************\n\n// Running the Server\napp.listen(process.env.PORT,process.env.IP,function(){\n    console.log(\"Server Started\");\n});","undoManager":{"mark":-2,"position":100,"stack":[[{"start":{"row":158,"column":39},"end":{"row":158,"column":40},"action":"insert","lines":["r"],"id":2738},{"start":{"row":158,"column":40},"end":{"row":158,"column":41},"action":"insert","lines":["e"]},{"start":{"row":158,"column":41},"end":{"row":158,"column":42},"action":"insert","lines":["q"]},{"start":{"row":158,"column":42},"end":{"row":158,"column":43},"action":"insert","lines":[","]},{"start":{"row":158,"column":43},"end":{"row":158,"column":44},"action":"insert","lines":["r"]},{"start":{"row":158,"column":44},"end":{"row":158,"column":45},"action":"insert","lines":["e"]},{"start":{"row":158,"column":45},"end":{"row":158,"column":46},"action":"insert","lines":["s"]}],[{"start":{"row":158,"column":47},"end":{"row":158,"column":49},"action":"insert","lines":["{}"],"id":2739}],[{"start":{"row":158,"column":48},"end":{"row":160,"column":0},"action":"insert","lines":["","    ",""],"id":2740}],[{"start":{"row":160,"column":2},"end":{"row":160,"column":3},"action":"insert","lines":[";"],"id":2741}],[{"start":{"row":159,"column":4},"end":{"row":166,"column":7},"action":"insert","lines":["clinic.findById(req.params.id).populate({path:'users',options:{ sort:{date : 1}}}).exec(function(err,allclinic){","        if(err){","            console.log(err);","        }else{","           // console.log(allclinic);","            res.render(\"user_record\",{clinic:allclinic});","        }","    });"],"id":2742}],[{"start":{"row":159,"column":58},"end":{"row":159,"column":84},"action":"remove","lines":["options:{ sort:{date : 1}}"],"id":2743}],[{"start":{"row":159,"column":58},"end":{"row":159,"column":59},"action":"insert","lines":["m"],"id":2744},{"start":{"row":159,"column":59},"end":{"row":159,"column":60},"action":"insert","lines":["a"]},{"start":{"row":159,"column":60},"end":{"row":159,"column":61},"action":"insert","lines":["t"]},{"start":{"row":159,"column":61},"end":{"row":159,"column":62},"action":"insert","lines":["c"]},{"start":{"row":159,"column":62},"end":{"row":159,"column":63},"action":"insert","lines":["h"]}],[{"start":{"row":159,"column":63},"end":{"row":159,"column":64},"action":"insert","lines":[":"],"id":2745}],[{"start":{"row":159,"column":64},"end":{"row":159,"column":66},"action":"insert","lines":["{}"],"id":2746}],[{"start":{"row":159,"column":65},"end":{"row":159,"column":66},"action":"insert","lines":["d"],"id":2747},{"start":{"row":159,"column":66},"end":{"row":159,"column":67},"action":"insert","lines":["a"]},{"start":{"row":159,"column":67},"end":{"row":159,"column":68},"action":"insert","lines":["t"]},{"start":{"row":159,"column":68},"end":{"row":159,"column":69},"action":"insert","lines":["e"]},{"start":{"row":159,"column":69},"end":{"row":159,"column":70},"action":"insert","lines":[":"]}],[{"start":{"row":159,"column":70},"end":{"row":159,"column":71},"action":"insert","lines":["r"],"id":2748},{"start":{"row":159,"column":71},"end":{"row":159,"column":72},"action":"insert","lines":["e"]}],[{"start":{"row":159,"column":72},"end":{"row":159,"column":73},"action":"insert","lines":["q"],"id":2749},{"start":{"row":159,"column":73},"end":{"row":159,"column":74},"action":"insert","lines":["."]},{"start":{"row":159,"column":74},"end":{"row":159,"column":75},"action":"insert","lines":["b"]},{"start":{"row":159,"column":75},"end":{"row":159,"column":76},"action":"insert","lines":["o"]}],[{"start":{"row":159,"column":76},"end":{"row":159,"column":77},"action":"insert","lines":["d"],"id":2750},{"start":{"row":159,"column":77},"end":{"row":159,"column":78},"action":"insert","lines":["y"]},{"start":{"row":159,"column":78},"end":{"row":159,"column":79},"action":"insert","lines":["."]},{"start":{"row":159,"column":79},"end":{"row":159,"column":80},"action":"insert","lines":["d"]}],[{"start":{"row":159,"column":80},"end":{"row":159,"column":81},"action":"insert","lines":["a"],"id":2751}],[{"start":{"row":159,"column":80},"end":{"row":159,"column":81},"action":"remove","lines":["a"],"id":2752},{"start":{"row":159,"column":79},"end":{"row":159,"column":80},"action":"remove","lines":["d"]}],[{"start":{"row":159,"column":79},"end":{"row":159,"column":80},"action":"insert","lines":["s"],"id":2753},{"start":{"row":159,"column":80},"end":{"row":159,"column":81},"action":"insert","lines":["e"]},{"start":{"row":159,"column":81},"end":{"row":159,"column":82},"action":"insert","lines":["a"]},{"start":{"row":159,"column":82},"end":{"row":159,"column":83},"action":"insert","lines":["r"]},{"start":{"row":159,"column":83},"end":{"row":159,"column":84},"action":"insert","lines":["c"]},{"start":{"row":159,"column":84},"end":{"row":159,"column":85},"action":"insert","lines":["h"]}],[{"start":{"row":159,"column":70},"end":{"row":159,"column":71},"action":"insert","lines":[" "],"id":2754}],[{"start":{"row":159,"column":69},"end":{"row":159,"column":70},"action":"insert","lines":[" "],"id":2755}],[{"start":{"row":159,"column":63},"end":{"row":159,"column":64},"action":"remove","lines":[":"],"id":2756},{"start":{"row":159,"column":63},"end":{"row":159,"column":64},"action":"insert","lines":[" "]}],[{"start":{"row":159,"column":64},"end":{"row":159,"column":65},"action":"insert","lines":[":"],"id":2757}],[{"start":{"row":159,"column":65},"end":{"row":159,"column":66},"action":"insert","lines":[" "],"id":2758}],[{"start":{"row":159,"column":90},"end":{"row":159,"column":91},"action":"insert","lines":[" "],"id":2759}],[{"start":{"row":159,"column":90},"end":{"row":159,"column":91},"action":"insert","lines":[","],"id":2760}],[{"start":{"row":159,"column":91},"end":{"row":159,"column":92},"action":"insert","lines":[" "],"id":2761},{"start":{"row":159,"column":92},"end":{"row":159,"column":93},"action":"insert","lines":["s"]},{"start":{"row":159,"column":93},"end":{"row":159,"column":94},"action":"insert","lines":["o"]},{"start":{"row":159,"column":94},"end":{"row":159,"column":95},"action":"insert","lines":["r"]},{"start":{"row":159,"column":95},"end":{"row":159,"column":96},"action":"insert","lines":["t"]}],[{"start":{"row":159,"column":95},"end":{"row":159,"column":96},"action":"remove","lines":["t"],"id":2762},{"start":{"row":159,"column":94},"end":{"row":159,"column":95},"action":"remove","lines":["r"]},{"start":{"row":159,"column":93},"end":{"row":159,"column":94},"action":"remove","lines":["o"]},{"start":{"row":159,"column":92},"end":{"row":159,"column":93},"action":"remove","lines":["s"]}],[{"start":{"row":159,"column":92},"end":{"row":159,"column":93},"action":"insert","lines":["o"],"id":2763},{"start":{"row":159,"column":93},"end":{"row":159,"column":94},"action":"insert","lines":["p"]},{"start":{"row":159,"column":94},"end":{"row":159,"column":95},"action":"insert","lines":["t"]},{"start":{"row":159,"column":95},"end":{"row":159,"column":96},"action":"insert","lines":["i"]},{"start":{"row":159,"column":96},"end":{"row":159,"column":97},"action":"insert","lines":["o"]},{"start":{"row":159,"column":97},"end":{"row":159,"column":98},"action":"insert","lines":["n"]}],[{"start":{"row":159,"column":98},"end":{"row":159,"column":99},"action":"insert","lines":["s"],"id":2764},{"start":{"row":159,"column":99},"end":{"row":159,"column":100},"action":"insert","lines":[":"]},{"start":{"row":159,"column":100},"end":{"row":159,"column":101},"action":"insert","lines":["{"]}],[{"start":{"row":159,"column":101},"end":{"row":159,"column":102},"action":"insert","lines":["}"],"id":2765}],[{"start":{"row":159,"column":101},"end":{"row":159,"column":102},"action":"insert","lines":[" "],"id":2766},{"start":{"row":159,"column":102},"end":{"row":159,"column":103},"action":"insert","lines":["s"]},{"start":{"row":159,"column":103},"end":{"row":159,"column":104},"action":"insert","lines":["o"]},{"start":{"row":159,"column":104},"end":{"row":159,"column":105},"action":"insert","lines":["r"]},{"start":{"row":159,"column":105},"end":{"row":159,"column":106},"action":"insert","lines":["t"]}],[{"start":{"row":159,"column":106},"end":{"row":159,"column":107},"action":"insert","lines":[":"],"id":2767}],[{"start":{"row":159,"column":107},"end":{"row":159,"column":109},"action":"insert","lines":["{}"],"id":2768}],[{"start":{"row":159,"column":108},"end":{"row":159,"column":109},"action":"insert","lines":["t"],"id":2769},{"start":{"row":159,"column":109},"end":{"row":159,"column":110},"action":"insert","lines":["i"]}],[{"start":{"row":159,"column":110},"end":{"row":159,"column":111},"action":"insert","lines":["m"],"id":2770},{"start":{"row":159,"column":111},"end":{"row":159,"column":112},"action":"insert","lines":["e"]}],[{"start":{"row":159,"column":112},"end":{"row":159,"column":113},"action":"insert","lines":[" "],"id":2771},{"start":{"row":159,"column":113},"end":{"row":159,"column":114},"action":"insert","lines":[":"]},{"start":{"row":159,"column":114},"end":{"row":159,"column":115},"action":"insert","lines":["-"]},{"start":{"row":159,"column":115},"end":{"row":159,"column":116},"action":"insert","lines":["2"]}],[{"start":{"row":159,"column":115},"end":{"row":159,"column":116},"action":"remove","lines":["2"],"id":2772}],[{"start":{"row":159,"column":115},"end":{"row":159,"column":116},"action":"insert","lines":["2"],"id":2773}],[{"start":{"row":159,"column":115},"end":{"row":159,"column":116},"action":"remove","lines":["2"],"id":2774}],[{"start":{"row":159,"column":115},"end":{"row":159,"column":116},"action":"insert","lines":["1"],"id":2775}],[{"start":{"row":159,"column":114},"end":{"row":159,"column":115},"action":"remove","lines":["-"],"id":2776}],[{"start":{"row":159,"column":114},"end":{"row":159,"column":115},"action":"insert","lines":["-"],"id":2777}],[{"start":{"row":159,"column":114},"end":{"row":159,"column":115},"action":"remove","lines":["-"],"id":2778}],[{"start":{"row":159,"column":89},"end":{"row":159,"column":90},"action":"insert","lines":[","],"id":2779}],[{"start":{"row":159,"column":90},"end":{"row":159,"column":91},"action":"insert","lines":["t"],"id":2780},{"start":{"row":159,"column":91},"end":{"row":159,"column":92},"action":"insert","lines":["i"]},{"start":{"row":159,"column":92},"end":{"row":159,"column":93},"action":"insert","lines":["m"]},{"start":{"row":159,"column":93},"end":{"row":159,"column":94},"action":"insert","lines":["e"]}],[{"start":{"row":159,"column":94},"end":{"row":159,"column":95},"action":"insert","lines":[":"],"id":2781},{"start":{"row":159,"column":95},"end":{"row":159,"column":96},"action":"insert","lines":["r"]},{"start":{"row":159,"column":96},"end":{"row":159,"column":97},"action":"insert","lines":["e"]}],[{"start":{"row":159,"column":97},"end":{"row":159,"column":98},"action":"insert","lines":["q"],"id":2782},{"start":{"row":159,"column":98},"end":{"row":159,"column":99},"action":"insert","lines":["."]},{"start":{"row":159,"column":99},"end":{"row":159,"column":100},"action":"insert","lines":["b"]},{"start":{"row":159,"column":100},"end":{"row":159,"column":101},"action":"insert","lines":["o"]}],[{"start":{"row":159,"column":101},"end":{"row":159,"column":102},"action":"insert","lines":["d"],"id":2783},{"start":{"row":159,"column":102},"end":{"row":159,"column":103},"action":"insert","lines":["y"]},{"start":{"row":159,"column":103},"end":{"row":159,"column":104},"action":"insert","lines":["."]}],[{"start":{"row":159,"column":104},"end":{"row":159,"column":105},"action":"insert","lines":["t"],"id":2784},{"start":{"row":159,"column":105},"end":{"row":159,"column":106},"action":"insert","lines":["i"]},{"start":{"row":159,"column":106},"end":{"row":159,"column":107},"action":"insert","lines":["m"]},{"start":{"row":159,"column":107},"end":{"row":159,"column":108},"action":"insert","lines":["e"]},{"start":{"row":159,"column":108},"end":{"row":159,"column":109},"action":"insert","lines":["s"]},{"start":{"row":159,"column":109},"end":{"row":159,"column":110},"action":"insert","lines":["e"]},{"start":{"row":159,"column":110},"end":{"row":159,"column":111},"action":"insert","lines":["a"]},{"start":{"row":159,"column":111},"end":{"row":159,"column":112},"action":"insert","lines":["r"]},{"start":{"row":159,"column":112},"end":{"row":159,"column":113},"action":"insert","lines":["c"]},{"start":{"row":159,"column":113},"end":{"row":159,"column":114},"action":"insert","lines":["h"]}],[{"start":{"row":159,"column":94},"end":{"row":159,"column":95},"action":"insert","lines":[" "],"id":2785}],[{"start":{"row":159,"column":96},"end":{"row":159,"column":97},"action":"insert","lines":[" "],"id":2786}],[{"start":{"row":159,"column":89},"end":{"row":159,"column":90},"action":"remove","lines":[","],"id":2787}],[{"start":{"row":159,"column":89},"end":{"row":159,"column":90},"action":"insert","lines":["\\"],"id":2788},{"start":{"row":159,"column":90},"end":{"row":159,"column":91},"action":"insert","lines":["\\"]}],[{"start":{"row":159,"column":90},"end":{"row":159,"column":91},"action":"remove","lines":["\\"],"id":2789},{"start":{"row":159,"column":89},"end":{"row":159,"column":90},"action":"remove","lines":["\\"]}],[{"start":{"row":159,"column":89},"end":{"row":159,"column":90},"action":"insert","lines":["|"],"id":2790},{"start":{"row":159,"column":90},"end":{"row":159,"column":91},"action":"insert","lines":["|"]}],[{"start":{"row":159,"column":90},"end":{"row":159,"column":91},"action":"remove","lines":["|"],"id":2791},{"start":{"row":159,"column":89},"end":{"row":159,"column":90},"action":"remove","lines":["|"]}],[{"start":{"row":159,"column":89},"end":{"row":159,"column":90},"action":"insert","lines":[","],"id":2792}],[{"start":{"row":159,"column":65},"end":{"row":159,"column":66},"action":"insert","lines":["{"],"id":2811}],[{"start":{"row":159,"column":66},"end":{"row":159,"column":67},"action":"insert","lines":["$"],"id":2812}],[{"start":{"row":159,"column":67},"end":{"row":159,"column":68},"action":"insert","lines":["o"],"id":2813},{"start":{"row":159,"column":68},"end":{"row":159,"column":69},"action":"insert","lines":["r"]},{"start":{"row":159,"column":69},"end":{"row":159,"column":70},"action":"insert","lines":[":"]}],[{"start":{"row":159,"column":122},"end":{"row":159,"column":123},"action":"insert","lines":["}"],"id":2814}],[{"start":{"row":159,"column":71},"end":{"row":159,"column":72},"action":"insert","lines":["["],"id":2815}],[{"start":{"row":159,"column":123},"end":{"row":159,"column":124},"action":"insert","lines":["]"],"id":2816}],[{"start":{"row":159,"column":95},"end":{"row":159,"column":96},"action":"insert","lines":["}"],"id":2817}],[{"start":{"row":159,"column":97},"end":{"row":159,"column":98},"action":"insert","lines":["{"],"id":2818}],[{"start":{"row":159,"column":68},"end":{"row":159,"column":69},"action":"remove","lines":["r"],"id":2830},{"start":{"row":159,"column":67},"end":{"row":159,"column":68},"action":"remove","lines":["o"]}],[{"start":{"row":159,"column":67},"end":{"row":159,"column":68},"action":"insert","lines":["a"],"id":2831},{"start":{"row":159,"column":68},"end":{"row":159,"column":69},"action":"insert","lines":["n"]},{"start":{"row":159,"column":69},"end":{"row":159,"column":70},"action":"insert","lines":["d"]}],[{"start":{"row":164,"column":44},"end":{"row":164,"column":45},"action":"insert","lines":["s"],"id":2832}],[{"start":{"row":178,"column":44},"end":{"row":178,"column":45},"action":"insert","lines":["s"],"id":2833}],[{"start":{"row":173,"column":81},"end":{"row":173,"column":82},"action":"insert","lines":["-"],"id":2834}],[{"start":{"row":159,"column":45},"end":{"row":160,"column":0},"action":"insert","lines":["",""],"id":2835},{"start":{"row":160,"column":0},"end":{"row":160,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":160,"column":21},"end":{"row":161,"column":0},"action":"insert","lines":["",""],"id":2836},{"start":{"row":161,"column":0},"end":{"row":161,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":161,"column":80},"end":{"row":162,"column":0},"action":"insert","lines":["",""],"id":2837},{"start":{"row":162,"column":0},"end":{"row":162,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":145,"column":27},"end":{"row":145,"column":28},"action":"insert","lines":["."],"id":2838}],[{"start":{"row":145,"column":27},"end":{"row":145,"column":28},"action":"remove","lines":["."],"id":2839}],[{"start":{"row":145,"column":27},"end":{"row":145,"column":28},"action":"insert","lines":["i"],"id":2840},{"start":{"row":145,"column":28},"end":{"row":145,"column":29},"action":"insert","lines":["s"]},{"start":{"row":145,"column":29},"end":{"row":145,"column":30},"action":"insert","lines":["L"]},{"start":{"row":145,"column":30},"end":{"row":145,"column":31},"action":"insert","lines":["o"]},{"start":{"row":145,"column":31},"end":{"row":145,"column":32},"action":"insert","lines":["g"]},{"start":{"row":145,"column":32},"end":{"row":145,"column":33},"action":"insert","lines":["g"]},{"start":{"row":145,"column":33},"end":{"row":145,"column":34},"action":"insert","lines":["e"]},{"start":{"row":145,"column":34},"end":{"row":145,"column":35},"action":"insert","lines":["d"]}],[{"start":{"row":145,"column":35},"end":{"row":145,"column":36},"action":"insert","lines":["I"],"id":2841},{"start":{"row":145,"column":36},"end":{"row":145,"column":37},"action":"insert","lines":["n"]},{"start":{"row":145,"column":37},"end":{"row":145,"column":38},"action":"insert","lines":[","]}],[{"start":{"row":22,"column":31},"end":{"row":22,"column":32},"action":"insert","lines":[" "],"id":2842}],[{"start":{"row":22,"column":45},"end":{"row":22,"column":46},"action":"insert","lines":[" "],"id":2843}],[{"start":{"row":145,"column":36},"end":{"row":145,"column":37},"action":"remove","lines":["n"],"id":2844},{"start":{"row":145,"column":35},"end":{"row":145,"column":36},"action":"remove","lines":["I"]},{"start":{"row":145,"column":34},"end":{"row":145,"column":35},"action":"remove","lines":["d"]},{"start":{"row":145,"column":33},"end":{"row":145,"column":34},"action":"remove","lines":["e"]},{"start":{"row":145,"column":32},"end":{"row":145,"column":33},"action":"remove","lines":["g"]},{"start":{"row":145,"column":31},"end":{"row":145,"column":32},"action":"remove","lines":["g"]},{"start":{"row":145,"column":30},"end":{"row":145,"column":31},"action":"remove","lines":["o"]},{"start":{"row":145,"column":29},"end":{"row":145,"column":30},"action":"remove","lines":["L"]},{"start":{"row":145,"column":28},"end":{"row":145,"column":29},"action":"remove","lines":["s"]}],[{"start":{"row":145,"column":27},"end":{"row":145,"column":28},"action":"remove","lines":["i"],"id":2845},{"start":{"row":145,"column":26},"end":{"row":145,"column":27},"action":"remove","lines":[","]}],[{"start":{"row":175,"column":29},"end":{"row":175,"column":30},"action":"insert","lines":["i"],"id":2846},{"start":{"row":175,"column":30},"end":{"row":175,"column":31},"action":"insert","lines":["s"]},{"start":{"row":175,"column":31},"end":{"row":175,"column":32},"action":"insert","lines":["L"]},{"start":{"row":175,"column":32},"end":{"row":175,"column":33},"action":"insert","lines":["o"]},{"start":{"row":175,"column":33},"end":{"row":175,"column":34},"action":"insert","lines":["g"]},{"start":{"row":175,"column":34},"end":{"row":175,"column":35},"action":"insert","lines":["g"]},{"start":{"row":175,"column":35},"end":{"row":175,"column":36},"action":"insert","lines":["e"]},{"start":{"row":175,"column":36},"end":{"row":175,"column":37},"action":"insert","lines":["d"]}],[{"start":{"row":175,"column":37},"end":{"row":175,"column":38},"action":"insert","lines":["I"],"id":2847},{"start":{"row":175,"column":38},"end":{"row":175,"column":39},"action":"insert","lines":["n"]},{"start":{"row":175,"column":39},"end":{"row":175,"column":40},"action":"insert","lines":[","]}],[{"start":{"row":120,"column":12},"end":{"row":120,"column":15},"action":"insert","lines":["// "],"id":2848},{"start":{"row":121,"column":12},"end":{"row":121,"column":15},"action":"insert","lines":["// "]}],[{"start":{"row":120,"column":12},"end":{"row":120,"column":15},"action":"remove","lines":["// "],"id":2849},{"start":{"row":121,"column":12},"end":{"row":121,"column":15},"action":"remove","lines":["// "]}],[{"start":{"row":118,"column":12},"end":{"row":118,"column":15},"action":"insert","lines":["// "],"id":2850},{"start":{"row":119,"column":12},"end":{"row":119,"column":15},"action":"insert","lines":["// "]}],[{"start":{"row":68,"column":12},"end":{"row":68,"column":48},"action":"remove","lines":["req.flash(\"info\", \"Flash is back!\");"],"id":2851}],[{"start":{"row":53,"column":4},"end":{"row":53,"column":8},"action":"insert","lines":["    "],"id":2852}],[{"start":{"row":54,"column":4},"end":{"row":54,"column":8},"action":"insert","lines":["    "],"id":2853}],[{"start":{"row":55,"column":4},"end":{"row":55,"column":8},"action":"insert","lines":["    "],"id":2854}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":8},"action":"insert","lines":["    "],"id":2855}],[{"start":{"row":57,"column":5},"end":{"row":57,"column":8},"action":"insert","lines":["   "],"id":2856}],[{"start":{"row":58,"column":6},"end":{"row":58,"column":8},"action":"insert","lines":["  "],"id":2857}],[{"start":{"row":59,"column":7},"end":{"row":59,"column":8},"action":"insert","lines":[" "],"id":2858}],[{"start":{"row":60,"column":7},"end":{"row":60,"column":8},"action":"insert","lines":[" "],"id":2859}],[{"start":{"row":61,"column":4},"end":{"row":61,"column":8},"action":"insert","lines":["    "],"id":2860}],[{"start":{"row":62,"column":4},"end":{"row":62,"column":8},"action":"insert","lines":["    "],"id":2861}],[{"start":{"row":63,"column":4},"end":{"row":63,"column":8},"action":"insert","lines":["    "],"id":2862}],[{"start":{"row":64,"column":8},"end":{"row":64,"column":12},"action":"insert","lines":["    "],"id":2863}],[{"start":{"row":120,"column":19},"end":{"row":120,"column":29},"action":"remove","lines":["Date.parse"],"id":2864}],[{"start":{"row":121,"column":19},"end":{"row":121,"column":29},"action":"remove","lines":["Date.parse"],"id":2865}],[{"start":{"row":111,"column":1},"end":{"row":112,"column":1},"action":"remove","lines":[""," "],"id":2867}],[{"start":{"row":107,"column":0},"end":{"row":108,"column":1},"action":"remove","lines":[""," "],"id":2868},{"start":{"row":106,"column":0},"end":{"row":107,"column":0},"action":"remove","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":2484.09375,"scrollleft":0,"selection":{"start":{"row":160,"column":16},"end":{"row":160,"column":16},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":148,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1524072645507}